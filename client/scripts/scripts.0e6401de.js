"use strict";angular.module("alakazamApp",["ngAnimate","ngRoute","firebase","720kb.fx","720kb.socialshare","cfp.loadingBar","angular-loading-bar","ngStorage"]).config(["$routeProvider",function(a){a.when("/intro",{templateUrl:"views/intro.html",controller:"IntroCtrl",controllerAs:"intro"}).when("/quiz",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/score",{templateUrl:"views/finished.html",controller:"FinishedCtrl",controllerAs:"finished"}).otherwise({redirectTo:"/intro"})}]).factory("RapperService",["$firebaseArray","FIREBASE_URL",function(a,b){var c=new Firebase(b+"Rappers"),d=a(c);return{loadRapper:function(){return d},getRapper:function(){return d[Math.floor(Math.random()*d.length)]},getRapperAudio:function(a){return a.adlibs[Math.floor(Math.random()*a.adlibs.length)]}}}]).factory("UserService",["$firebaseArray","FIREBASE_URL","$sessionStorage",function(a,b,c){var d=c.score||0;return{getScore:function(){return d},setScore:function(){return d++},resetScore:function(){c.$reset(),d=0},saveScore:function(d){var e=new Firebase(b+"Scores"),f=a(e);f.$add(d).then(function(a){f.$indexFor(a.key())}),c.score=d}}}]).config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1}]).directive("googleAdSense",function(){return{restrict:"A",replace:!0,templateUrl:"../../views/adsense.html",controller:function(){(adsbygoogle=window.adsbygoogle||[]).push({})}}}),angular.module("alakazamApp").constant("FIREBASE_URL","https://popping-heat-8539.firebaseio.com/").constant("FIREBASE_HOSTING","https://popping-heat-8539.firebaseapp.com").constant("QUIZ_SIZE",25),angular.module("alakazamApp").controller("IntroCtrl",["$scope","RapperService","FIREBASE_HOSTING","$interval","$timeout","$location","cfpLoadingBar",function(a,b,c,d,e,f,g){g.start(),a.change=!1,a.getStarted=function(){f.url("quiz")},b.loadRapper().$loaded().then(function(){function f(){e(function(){a.image=c+b.getRapper().image,a.change=!0},500)}g.complete(),f(),d(function(){f(),a.change=!1},5e3)})}]),angular.module("alakazamApp").controller("MainCtrl",["$scope","$location","cfpLoadingBar","RapperService","UserService","FIREBASE_HOSTING","QUIZ_SIZE",function(a,b,c,d,e,f,g){function h(){function b(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}for(var c=[],e=[];c.length<g;){var h=d.getRapper(),i=d.getRapperAudio(h);if(-1===c.indexOf(i)){c.push(i),e[c.length-1]={correct:{name:h.name,image:f+h.image,audio:f+i,status:null},selected:null,answers:[{name:h.name,image:f+h.image,isCorrect:!0}]};for(var j=[h.name];j.length<4;){var k=d.getRapper();-1===j.indexOf(k.name)&&(j.push(k.name),e[c.length-1].answers[j.length-1]={name:k.name,image:f+k.image,isCorrect:!1})}b(e[c.length-1].answers)}}a.quiz=e,a.loadAudio()}c.start();var i=null,j=!0;a.current=0,a.imgLoad=!1,d.loadRapper().$loaded().then(function(){h()}),a.loadAudio=function(){i=new Audio(a.quiz[a.current].correct.audio),i.onended=function(){j=!0},a.playAudio(),c.complete()},a.playAudio=function(){!0===j&&(j=!1,i.play())},a.pauseAudio=function(){i.pause(),j=!0},a.answer=function(b){a.pauseAudio(),null===a.quiz[a.current].selected&&(a.quiz[a.current].selected=b,a.quiz[a.current].correct.status=a.quiz[a.current].answers[b].isCorrect,a.quiz[a.current].correct.status&&e.setScore(),a.playAudio())},a.loaded=function(){a.imgLoad=!0},a.next=function(){a.pauseAudio(),a.imgLoad=!1,a.current++,g!==a.current?(c.start(),a.loadAudio()):(e.saveScore(e.getScore()),b.url("score"))}}]).directive("imageonload",function(){return{restrict:"A",link:function(a,b,c){b.bind("load",function(){a.$apply(c.imageonload)})}}}),angular.module("alakazamApp").controller("FinishedCtrl",["$scope","$location","RapperService","UserService","FIREBASE_HOSTING","QUIZ_SIZE",function(a,b,c,d,e,f){a.score=d.getScore(),a.total=f,a.average=null,a.location=b.absUrl(),a.text="Can you identify rapper based only on their ad libs? I scored "+a.score+" out of "+a.total+".",a.hashtag="RapAdlibs, RapQuiz",a.startOver=function(){!0===window.confirm("Would you like to return back to the main screen to try again!")&&(d.resetScore(),b.url("intro"))}}]),angular.module("alakazamApp").run(["$templateCache",function(a){a.put("views/adsense.html",'<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1710263662438559" data-ad-slot="7118476583" data-ad-format="auto"></ins>'),a.put("views/finished.html",'<div> <h2 class="center header">Complete!</h2> <hr> <h3 class="center">You scored <strong>{{score}}</strong> out of {{total}}!</h3> <p class="center" ng-if="average !== null">The average score was {{average}}.</p> <div class="social_container grid"> <div class="unit one-quarter"> <div class="blank animated bounceInRight delay-2" ng-click="startOver()"> <img ng-src="images/social/blank.f0849286.png"> </div> </div> <div class="unit one-quarter"> <div class="facebook animated bounceInRight delay-3" ng-click="shareFacebook()"> <img ng-src="images/social/facebook.6b1908c3.png" socialshare socialshare-provider="facebook" socialshare-text="{{text}}" socialshare-url="{{location}}"> </div> </div> <div class="unit one-quarter"> <div class="twitter animated bounceInRight delay-4" ng-click="shareTwitter()"> <img ng-src="images/social/twitter.7f3d2450.png" socialshare socialshare-provider="twitter" socialshare-text="{{text}}" socialshare-hashtags="{{hashtag}}" socialshare-url="{{location}}"> </div> </div> \x3c!--<div class="unit one-quarter">\n            <div class="share animated bounceInRight delay-5" ng-click="share()">\n                <img ng-src="images/social/share.31b91012.png" />\n            </div>\n        </div>--\x3e </div> <hr> </div>'),a.put("views/intro.html",'<div class="intro"> <h2 class="header center">Rapper Ad-lib Quiz</h2> <img ng-src="{{image}}" class="intro-image center" ngfx-default="show" ngfx-speed="slow" ngfx-bounce-in-left="change" ngfx-bounce-out-right="!change"> <p class="description"><strong>Rap Quiz:</strong><br>In this quiz app, you’ll hear a short ad-lib from a famous rapper for just 1-3 seconds. After that you’ll get the options to identify the rapper. Do it fast though because you’ll have a deadline!</p> <button class="button button-outline" ng-click="getStarted();"> Get Started! </button> </div>'),a.put("views/main.html",'<div ngfx-fade-in-up="imgLoad === true"> <h2 class="center header">{{current + 1}}. What rapper is this?</h2> <div class="center header-image {{(quiz[current].correct.status !== null)?((quiz[current].correct.status)?\'correct\':\'wrong\'):\'\'}}"> <div class="header-wrapper"> <img class="image animated" imageonload="loaded()" ng-class="{\'show-image tada\': quiz[current].correct.status !==  null}" ng-src="{{quiz[current].correct.image}}"> </div> </div> <div class="play-me center" ng-click="playAudio()" ng-show="quiz[current].correct.status ===  null"> <i class="icons ion-play"></i>&nbsp;&nbsp;Play Again! </div> <div class="play-me center" ng-click="next()" ng-show="quiz[current].correct.status !==  null"> <i class="icons ion-arrow-right-c" ngfx-tada="quiz[current].correct.status !==  null" ngfx-infinite></i>&nbsp;&nbsp;Next! </div> <div class="grid options no-gutters"> <div class="unit half"> <div class="rapper" ng-class="{\'correct\': quiz[current].selected !== null && quiz[current].answers[0].isCorrect === true , \'wrong\': quiz[current].selected === 0 && quiz[current].answers[0].isCorrect === false}" ng-click="answer(0)"> <img ng-src="{{quiz[current].answers[0].image}}" imageonload="loaded()"> <span>{{quiz[current].answers[0].name}}</span> </div> </div> <div class="unit half"> <div class="rapper" ng-class="{\'correct\': quiz[current].selected !== null && quiz[current].answers[1].isCorrect === true, \'wrong\': quiz[current].selected === 1 && quiz[current].answers[1].isCorrect === false}" ng-click="answer(1)"> <img ng-src="{{quiz[current].answers[1].image}}" imageonload="loaded()"> <span>{{quiz[current].answers[1].name}}</span> </div> </div> </div> <div class="grid options no-gutters"> <div class="unit half"> <div class="rapper" ng-class="{\'correct\': quiz[current].selected !== null && quiz[current].answers[2].isCorrect === true, \'wrong\': quiz[current].selected === 2 && quiz[current].answers[2].isCorrect === false}" ng-click="answer(2)"> <img ng-src="{{quiz[current].answers[2].image}}" imageonload="loaded()"> <span>{{quiz[current].answers[2].name}}</span> </div> </div> <div class="unit half"> <div class="rapper" ng-class="{\'correct\': quiz[current].selected !== null && quiz[current].answers[3].isCorrect === true, \'wrong\': quiz[current].selected === 3 && quiz[current].answers[3].isCorrect === false}" ng-click="answer(3)"> <img ng-src="{{quiz[current].answers[3].image}}" imageonload="loaded()"> <span>{{quiz[current].answers[3].name}}</span> </div> </div> </div> </div>')}]);